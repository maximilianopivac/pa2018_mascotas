<h1>Perfil</h1>

<form #f="ngForm" novalidate>

    <div class="input-group mb-2">
        <div class="input-group-prepend">
          <span class="input-group-text" id="nombre">Nombre</span>
        </div>
        <input type="text" [(ngModel)]="perfil.name" class="form-control" placeholder="Nombre" aria-describedby="basic-addon3">
        <div *ngIf="f.controls.name?.invalid && f.controls.name?.touched" class="error">
            Valor no v&aacute;lido.
        </div>

        <div *ngIf="errors.name" class="error">
            {{errors.name}}
        </div>
    </div>

    <div class="input-group mb-2">
        <div class="input-group-prepend">
            <span class="input-group-text" id="Imagen">Imagen</span>
        </div>
        <file-upload name="imagen" allowedTypes="image/*" uploadButtonText="Upload File" [ngModel]="imagenPerfil.image" (ngModelChange)="actualizarImagen($event)"></file-upload>
    </div>

    <div class="input-group mb-2">
        <div class="input-group-prepend">
          <span class="input-group-text" id="nombre">Correo</span>
        </div>
        <input type="email" [(ngModel)]="perfil.email" class="form-control" placeholder="nombre@ejemplo.com" aria-describedby="basic-addon3">
        <div *ngIf="f.controls.email?.invalid && f.controls.email?.touched" class="error">
            Valor no v&aacute;lido.
        </div>

        <div *ngIf="errors.email" class="error">
            {{errors.email}}
        </div>
    </div>

    <div class="input-group mb-2">
        <div class="input-group-prepend">
          <span class="input-group-text" id="provincia">Provincia</span>
        </div>

        <select name='province' [(ngModel)]="perfil.province">
			<option *ngFor="let item of provincias" [value]="item._id" >{{item.name}}</option>
		</select>

        <div *ngIf="f.controls.province?.invalid && f.controls.province?.touched" class="error">
            Valor no v&aacute;lido.
        </div>

        <div *ngIf="errors.province" class="error">
            {{errors.province}}
        </div>
    </div>

    <div class="input-group mb-2">
        <div class="input-group-prepend">
          <span class="input-group-text" id="address">Direcci&oacute;n</span>
        </div>
        <input type="address" [(ngModel)]="perfil.address" class="form-control" placeholder="Direcci&oacute;n" aria-describedby="basic-addon3">
        
        <div *ngIf="f.controls.address?.invalid && f.controls.address?.touched" class="error">
            Valor no v&aacute;lido.
        </div>

        <div *ngIf="errors.address" class="error">
            {{errors.address}}
        </div>
    </div>

    <div class="input-group mb-2">
        <div class="input-group-prepend">
          <span class="input-group-text" id="telefono">Tel&eacute;fono</span>
        </div>
        <input type="phone" [(ngModel)]="perfil.phone" class="form-control" placeholder="Tel&eacute;fono" aria-describedby="basic-addon3">
        <div *ngIf="f.controls.phone?.invalid && f.controls.phone?.touched" class="error">
            Valor no v&aacute;lido.
        </div>

        <div *ngIf="errors.phone" class="error">
            {{errors.phone}}
        </div>
    </div>

    <button class="btn btn-success" (click)="submitForm()" [disabled]="f.invalid">Guardar</button>
    <button class="btn btn-outline-default" [routerLink]="['/']">Cancelar</button>
</form>